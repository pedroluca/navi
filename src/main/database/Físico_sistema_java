/* Lógico_sistema_java: */

CREATE TABLE Usuario_Trilha (
    username VARCHAR(50),
    nome VARCHAR(200),
    email VARCHAR(150) UNIQUE,
    senha VARCHAR(500),
    telefone VARCHAR(11),
    sexo CHAR(1),
    id INT AUTO INCREMENT,
    id_fase_atual INT,
    PRIMARY KEY (username, id)
);

CREATE TABLE Fase (
    xp_necessaria INT,
    xp_atual INT,
    assunto ENUM(Verbo, Advérbio, Substantivo, Pronome, Adjetivo),
    id INT PRIMARY KEY
);

CREATE TABLE Questao (
    id INT PRIMARY KEY,
    enunciado VARCHAR(1000)
);

CREATE TABLE Alternativa (
    id INT PRIMARY KEY,
    texto VARCHAR(200),
    is_correta BOOLEAN,
    id_questao INT
);

CREATE TABLE Fase_Questao (
    id_fase INT,
    id_questao INT,
    PRIMARY KEY (id_fase, id_questao)
);
 
ALTER TABLE Usuario_Trilha ADD CONSTRAINT FK_Usuario_Trilha_3
    FOREIGN KEY (id_fase_atual)
    REFERENCES Fase (id);
 
ALTER TABLE Alternativa ADD CONSTRAINT FK_Alternativa_2
    FOREIGN KEY (id_questao)
    REFERENCES Questao (id);
 
ALTER TABLE Fase_Questao ADD CONSTRAINT FK_Fase_Questao_1
    FOREIGN KEY (id_fase)
    REFERENCES Fase (id);
 
ALTER TABLE Fase_Questao ADD CONSTRAINT FK_Fase_Questao_3
    FOREIGN KEY (id_questao)
    REFERENCES Questao (id);